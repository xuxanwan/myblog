---
layout: post
title:  "java runtime 注意要点 "
date:   2016-07-13
categories: java
---
Runtime.exec() 不是cmd或shell环境，因此无法直接调用dir等命令。若要调用命令行下的命令，请参考第2节的实例。

通过 Process实例.getInputStream() 和 Process实例.getErrorStream() 获取的输入流和错误信息流是缓冲池向当前Java程序提供的，而不是直接获取外部程序的标准输出流和标准错误流。
而缓冲池的容量是一定的，因此若外部程序在运行过程中不断向缓冲池输出内容，当缓冲池填满，那么外部程序将暂停运行直到缓冲池有空位可接收外部程序的输出内容为止。（采用xcopy命令复制大量文件时将会出现该问题）

解决办法就是当前的Java程序不断读取缓冲池的内容，从而为腾出缓冲池的空间。

这里要注意一个坑：外部程序在执行结束后将会自动关闭，否则不管是字符流还是字节流均由于既读不到数据，又读不到流结束符而出现阻塞Java进程运行的情况。

而 cmd /c 就是告诉cmd环境进程，当执行完成后关闭自身。
